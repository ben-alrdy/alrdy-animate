"use strict";(this.webpackChunkAlrdyAnimate=this.webpackChunkAlrdyAnimate||[]).push([[151],{665:(t,e,a)=>{a.r(e),a.d(e,{createAccordionAnimations:()=>l});var i=a(543);let o=0;class r{constructor(t,e=1){this.accordion=t,this.defaultDuration=e,this.toggles=[],this.contents=[],this.visuals=[],this.elementMap=new Map,this.initializeElements()}initializeElements(){this.toggles=Array.from(this.accordion.querySelectorAll("[aa-accordion-toggle]")),this.contents=Array.from(this.accordion.querySelectorAll("[aa-accordion-content]")),this.visuals=Array.from(this.accordion.querySelectorAll("[aa-accordion-visual]")),this.toggles.forEach(t=>{const e=t.getAttribute("aa-accordion-toggle"),a=this.accordion.querySelector(`[aa-accordion-content="${e}"]`),i=this.accordion.querySelector(`[aa-accordion-visual="${e}"]`),o=t.querySelector("[aa-accordion-progress]"),r=parseFloat(t.getAttribute("aa-duration"))||this.defaultDuration,s=parseFloat(t.getAttribute("aa-delay"))||0,n=a&&parseFloat(a.getAttribute("aa-duration"))||this.defaultDuration/2,c=i&&parseFloat(i.getAttribute("aa-duration"))||this.defaultDuration,l=i&&parseFloat(i.getAttribute("aa-delay"))||0,u=(c+l)/2;this.elementMap.set(e,{toggle:t,content:a,visual:i,progressElement:o,duration:r,delay:s,contentDuration:n,reverseDuration:(r+s)/2,visualDuration:c,visualDelay:l,visualReverseDuration:u})}),this.setupEventTriggering()}setupEventTriggering(){this.toggles.forEach(t=>{const e=t.getAttribute("aa-accordion-toggle"),a=this.elementMap.get(e);a&&(a.content&&this.markElementsForEventTriggering(a.content),a.visual&&this.markElementsForEventTriggering(a.visual))})}markElementsForEventTriggering(t){[...t.hasAttribute("aa-animate")?[t]:[],...t.querySelectorAll("[aa-animate]")].forEach(t=>{t.setAttribute("aa-event-trigger","")})}getElementData(t){return this.elementMap.get(t)}getAllToggles(){return this.toggles}getActiveToggle(){return this.accordion.querySelector('[aa-accordion-toggle][aa-accordion-status="active"]')}getActiveVisual(){return this.accordion.querySelector('[aa-accordion-visual][aa-accordion-status="active"]')}getActiveVisualData(){const t=this.getActiveVisual();if(!t)return null;const e=t.getAttribute("aa-accordion-visual");return this.getElementData(e)}}class s{constructor(t,e,a=1){this.accordion=t,this.state=e,this.defaultDuration=a,this.accordionType=t.getAttribute("aa-accordion")||"basic",this.isMulti="multi"===this.accordionType,this.isAutoplay="autoplay"===this.accordionType,this.isScroll="scroll"===this.accordionType,this.isSingle="single"===this.accordionType,this.refreshTimer=null,this.debouncedRefresh=this.debouncedRefresh.bind(this),this.setupEventDelegation()}debouncedRefresh(){this.refreshTimer&&this.refreshTimer.kill(),this.refreshTimer=gsap.delayedCall(.1,()=>{window.ScrollTrigger&&window.ScrollTrigger.refresh(),this.refreshTimer=null})}setupEventDelegation(){this.accordion.addEventListener("click",t=>{const e=t.target.closest("[aa-accordion-toggle]");e&&this.handleToggle(e)}),this.accordion.addEventListener("keydown",t=>{const e=t.target.closest("[aa-accordion-toggle]");e&&("Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.handleToggle(e)))})}handleToggle(t){const e=t.getAttribute("aa-accordion-toggle"),a=this.state.getElementData(e);if(!a)return;const i="active"===t.getAttribute("aa-accordion-status");i&&this.isSingle||(i?this.closeAccordion(t,a):this.openAccordion(t,a))}openAccordion(t,e){const{toggleId:a,content:i,visual:o}=e;if(!this.isMulti){const e=this.state.getActiveToggle();if(e&&e!==t){const t=e.getAttribute("aa-accordion-toggle"),a=this.state.getElementData(t);a&&this.closeAccordion(e,a)}}t.setAttribute("aa-accordion-status","active"),i?t.setAttribute("aria-expanded","true"):t.setAttribute("aria-selected","true"),o&&o.setAttribute("aria-hidden","false"),i&&(gsap.set(i,{gridTemplateRows:"1fr"}),i.setAttribute("aa-accordion-status","active"),n(i,"play")),o&&this.handleVisualOpening(o,e),gsap.delayedCall(e.contentDuration,()=>{this.debouncedRefresh()})}closeAccordion(t,e){const{content:a,visual:i,contentDuration:o,reverseDuration:r}=e;t.setAttribute("aa-accordion-status","inactive"),a?t.setAttribute("aria-expanded","false"):t.setAttribute("aria-selected","false"),i&&i.setAttribute("aria-hidden","true"),a&&(a.setAttribute("aa-accordion-status","inactive"),gsap.set(a,{gridTemplateRows:"0fr"}),n(a,"reverse")),i&&(n(i,"reverse"),gsap.delayedCall(e.visualReverseDuration,()=>{gsap.set(i,{visibility:"hidden"}),i.setAttribute("aa-accordion-status","inactive")})),this.resetProgressBar(e),gsap.delayedCall(o,()=>{this.debouncedRefresh()})}handleVisualOpening(t,e){const a=this.state.getActiveVisualData();a&&a.visual!==t?gsap.delayedCall(a.visualReverseDuration,()=>{this.startVisualAnimation(t)}):this.startVisualAnimation(t)}startVisualAnimation(t){t.setAttribute("aa-accordion-status","active"),gsap.set(t,{visibility:"visible"}),n(t,"play")}resetProgressBar(t){const{progressElement:e,toggle:a}=t;if(!e)return;const i=a.querySelector('circle[aa-accordion-progress="circle"]');if(i)i.style.strokeDasharray="10000",i.style.strokeDashoffset="10000";else{const t=e.getAttribute("aa-accordion-progress")||"width";gsap.set(e,{[t]:0})}}triggerAccordionAnimations(t,e){n(t,e)}}function n(t,e){const a=[...t.hasAttribute("aa-animate")?[t]:[],...t.querySelectorAll("[aa-animate]")];(0,i.I)(a,e)}function c(t,e=null,a=null,i=1,c=null){const l=o++;!function(t){const e=t.querySelectorAll("[aa-accordion-toggle]"),a=t.querySelectorAll("[aa-accordion-content]"),i=t.querySelectorAll("[aa-accordion-visual]");e.forEach((t,e)=>{t.getAttribute("aa-accordion-toggle")||t.setAttribute("aa-accordion-toggle",`accordion-${e}`)}),a.forEach((t,e)=>{t.getAttribute("aa-accordion-content")||t.setAttribute("aa-accordion-content",`accordion-${e}`)}),i.forEach((t,e)=>{t.getAttribute("aa-accordion-visual")||t.setAttribute("aa-accordion-visual",`accordion-${e}`)})}(t),"scroll"===c&&window.ScrollTrigger&&ScrollTrigger.isTouch&&(t.setAttribute("aa-accordion","single"),c="single");const u=new r(t,i),g=new s(t,u,i);!function(t,e,a,i,o=1,r=0){const s=t.querySelector("[aa-accordion-initial]"),c="single"===(t.getAttribute("aa-accordion")||"basic");if(e.toggles.forEach(t=>{const a=t.getAttribute("aa-accordion-toggle"),i=e.getElementData(a);t.setAttribute("aa-accordion-status","inactive"),i.content&&i.content.setAttribute("aa-accordion-status","inactive"),function(t,e,a,i,o){const r=`accordion-${o}-toggle-${i}`,s=`accordion-${o}-content-${i}`,n=`accordion-${o}-visual-${i}`;t.setAttribute("id",r),t.setAttribute("tabindex","0"),e&&a?(t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",s),e.setAttribute("id",s),e.setAttribute("aria-labelledby",r),e.setAttribute("role","region"),a.setAttribute("id",n),a.setAttribute("aria-hidden","true")):e?(t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",s),e.setAttribute("id",s),e.setAttribute("aria-labelledby",r),e.setAttribute("role","region")):a&&(t.setAttribute("role","tab"),t.setAttribute("aria-selected","false"),t.setAttribute("aria-controls",n),a.setAttribute("id",n),a.setAttribute("aria-labelledby",r),a.setAttribute("role","tabpanel"))}(t,i.content,i.visual,a,r),i.visual&&(i.visual.setAttribute("aa-accordion-status","inactive"),gsap.set(i.visual,{visibility:"hidden"}))}),0===e.contents.length&&e.visuals.length>0&&e.toggles.length>0){const t=e.toggles[0].parentElement;t&&t.setAttribute("role","tablist")}e.contents.forEach(t=>{const e=parseFloat(t.getAttribute("aa-duration"))||o/2;t.style.setProperty("--aa-duration",`${e}s`)});let l=s;if(c&&!l&&e.toggles.length>0&&(l=e.toggles[0]),l){const t=l.getAttribute("aa-accordion-toggle"),a=e.getElementData(t);if(a){const t=()=>{l.setAttribute("aa-accordion-status","active"),a.content?l.setAttribute("aria-expanded","true"):l.setAttribute("aria-selected","true"),a.visual&&a.visual.setAttribute("aria-hidden","false"),a.content&&(gsap.set(a.content,{gridTemplateRows:"1fr"}),a.content.setAttribute("aa-accordion-status","active"),n(a.content,"play")),a.visual&&(a.visual.setAttribute("aa-accordion-status","active"),gsap.set(a.visual,{visibility:"visible"}),n(a.visual,"play"))};document.addEventListener("aa-text-splitting-complete",t,{once:!0}),gsap.delayedCall(.1,()=>{"active"!==l.getAttribute("aa-accordion-status")&&t()})}}}(t,u,0,0,i,l),"scroll"===c?function(t,e,a){if(!window.ScrollTrigger)return;const i=t.getAttribute("aa-scroll-start")||"top 20%",o=t.getAttribute("aa-distance")||"30",r=t.getAttribute("aa-scrub")||"true",s=e.toggles.length,n=s*parseFloat(o)*window.innerHeight/100,c=t.querySelector("[aa-accordion-initial]"),l=c&&e.toggles[0]===c;let u=l?0:-1;const g={value:0},d=gsap.to(g,{value:1,duration:1,ease:"none",paused:!0,onUpdate:()=>{const t=g.value;let i;if(i=l||t>0?Math.min(Math.floor(t*s),s-1):-1,u!==i){if(u>=0){const t=e.toggles[u],i=t.getAttribute("aa-accordion-toggle"),o=e.getElementData(i);o&&a.closeAccordion(t,o)}if(i>=0){const t=e.toggles[i],o=t.getAttribute("aa-accordion-toggle"),r=e.getElementData(o);r&&a.openAccordion(t,r)}u=i}!function(t,e,a,i){t.forEach((t,o)=>{const r=t.querySelector("[aa-accordion-progress]");if(!r)return;const s=r.getAttribute("aa-accordion-progress")||"width";if(o===e){const e=a*i-o,n=Math.max(0,Math.min(1,e));if("circle"===s){const e=t.querySelector('circle[aa-accordion-progress="circle"]');if(e){const t=parseFloat(e.getAttribute("r"))||25,a=2*Math.PI*t,i=a-n*a;e.style.strokeDashoffset=i}}else gsap.set(r,{[s]:100*n+"%"})}else if("circle"===s){const e=t.querySelector('circle[aa-accordion-progress="circle"]');if(e){const t=parseFloat(e.getAttribute("r"))||25,a=2*Math.PI*t;e.style.strokeDashoffset=a}}else gsap.set(r,{[s]:"0%"})})}(e.toggles,i,t,s)}}),A=ScrollTrigger.create({trigger:t,start:i,end:`+=${n}`,pin:!0,pinSpacing:!0,scrub:r&&parseFloat(r)||!0,animation:d}),h=a.handleToggle.bind(a);a.handleToggle=t=>{const a=e.toggles.indexOf(t);if(-1===a)return h(t);if(!A)return;const i=n/s,o=.05*i,r=A.start+a*i+o;window.lenis?window.lenis.scrollTo(r,{duration:1.2,offset:0,easing:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}):gsap.ScrollToPlugin?gsap.to(window,{duration:1.2,scrollTo:{y:r,autoKill:!1},ease:"power2.inOut"}):window.scrollTo({top:r,behavior:"smooth"})}}(t,u,g,i):"autoplay"===c&&function(t,e,a){let i=null,o=0,r=null,s=null;const c=t.querySelector("[aa-accordion-initial]");if(c){r=c,o=e.toggles.indexOf(c);const t=c.getAttribute("aa-accordion-toggle"),a=e.getElementData(t);a&&(c.setAttribute("aa-accordion-status","active"),a.content?c.setAttribute("aria-expanded","true"):c.setAttribute("aria-selected","true"),a.visual&&a.visual.setAttribute("aria-hidden","false"),a.content&&(gsap.set(a.content,{gridTemplateRows:"1fr"}),a.content.setAttribute("aa-accordion-status","active"),n(a.content,"play")),a.visual&&(a.visual.setAttribute("aa-accordion-status","active"),gsap.set(a.visual,{visibility:"visible"}),n(a.visual,"play")))}function l(n){if(n>=e.toggles.length)return;const c=e.toggles[n],u=c.getAttribute("aa-accordion-toggle"),g=e.getElementData(u);if(!g)return;if(r&&r!==c){const t=r.getAttribute("aa-accordion-toggle"),i=e.getElementData(t);i&&a.closeAccordion(r,i)}"active"===c.getAttribute("aa-accordion-status")||(a.openAccordion(c,g),r=c);const d=parseFloat(t.getAttribute("aa-duration"))||5;o=n,function(t,a){i&&i.kill();const o=e.toggles[t],r=e.getElementData(o.getAttribute("aa-accordion-toggle"));if(!r)return;const n=o.querySelector('circle[aa-accordion-progress="circle"]');if(n){const o=n.getAttribute("aa-ease")||"power1.inOut",r=parseFloat(n.getAttribute("r"))||25,c=2*Math.PI*r;n.style.strokeDasharray=c,n.style.strokeDashoffset=c,i=gsap.to(n,{strokeDashoffset:0,duration:a,ease:o,onComplete:()=>{s?.isActive&&l((t+1)%e.toggles.length)},paused:!s?.isActive})}else if(r.progressElement){const o=r.progressElement.getAttribute("aa-accordion-progress")||"width",n=r.progressElement.getAttribute("aa-ease")||"power1.inOut";"circle"===o?i=gsap.delayedCall(a,()=>{s?.isActive&&l((t+1)%e.toggles.length)}):(gsap.set(r.progressElement,{[o]:0}),i=gsap.to(r.progressElement,{[o]:"100%",duration:a,ease:n,onComplete:()=>{s?.isActive&&l((t+1)%e.toggles.length)},paused:!s?.isActive}))}else i=gsap.delayedCall(a,()=>{s?.isActive&&l((t+1)%e.toggles.length)});s?.isActive&&i.play()}(n,d)}a.handleToggle.bind(a),a.handleToggle=n=>{const c=n.getAttribute("aa-accordion-toggle"),u=e.getElementData(c);if(!u)return;const g="active"===n.getAttribute("aa-accordion-status"),d=t.querySelector("[aa-accordion-initial]");if((!i?.isActive()||e.toggles.indexOf(n)!==o)&&(i&&(i.kill(),i=null),(!g||!d)&&(g?a.closeAccordion(n,u):(e.toggles.forEach(t=>{if(t!==n){const i=t.getAttribute("aa-accordion-toggle"),o=e.getElementData(i);"active"===t.getAttribute("aa-accordion-status")&&o&&a.closeAccordion(t,o)}}),a.openAccordion(n,u),r=n),s?.isActive))){const t=e.toggles.indexOf(n);-1!==t&&l(t)}},window.ScrollTrigger&&(s=ScrollTrigger.create({trigger:t,start:"top bottom",end:"bottom top",toggleActions:"play pause resume pause",onEnter:()=>{i||gsap.delayedCall(.1,()=>{l(o)})},onToggle:({isActive:t})=>{i&&(t?i.play():i.pause())}}),s.isActive&&gsap.delayedCall(.2,()=>{l(o)}))}(t,u,g,0,0,i)}function l(t,e,a,i=1){return{accordion:(t,o=null)=>{c(t,e,a,i,o)}}}}}]);