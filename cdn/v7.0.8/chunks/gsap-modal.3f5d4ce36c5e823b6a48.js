"use strict";(this.webpackChunkAlrdyAnimate=this.webpackChunkAlrdyAnimate||[]).push([[297],{558:(t,e,a)=>{a.r(e),a.d(e,{createModalAnimations:()=>y});var n=a(543);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function s(t,e,a){return e&&u(t.prototype,e),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var a=e.call(t,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var d=function(){return s((function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l(this,t),this.group=e,this.defaultDuration=a,this.backdrop=null,this.modals=[],this.triggers=[],this.modalMap=new Map,this.initializeElements()}),[{key:"initializeElements",value:function(){var t=this;this.backdrop=this.group.querySelector("[aa-modal-backdrop]"),this.modals=Array.from(this.group.querySelectorAll("[aa-modal-name]")),this.triggers=Array.from(document.querySelectorAll("[aa-modal-target]")),this.modals.forEach((function(e){var a=e.getAttribute("aa-modal-name"),n=t.triggers.filter((function(t){return t.getAttribute("aa-modal-target")===a})),o=parseFloat(e.getAttribute("aa-duration"))||t.defaultDuration,i=parseFloat(e.getAttribute("aa-delay"))||0,l=[].concat(r(e.hasAttribute("aa-animate")?[e]:[]),r(e.querySelectorAll("[aa-animate]")));l.forEach((function(t){t.setAttribute("aa-event-trigger","")})),t.modalMap.set(a,{modal:e,triggers:n,duration:o,delay:i,animatedElements:l})}))}},{key:"getModalByName",value:function(t){return this.modalMap.get(t)}},{key:"getActiveModal",value:function(){return this.group.querySelector('[aa-modal-name][aa-modal-status="active"]')}},{key:"getAllModals",value:function(){return this.modals}},{key:"getBackdrop",value:function(){return this.backdrop}}])}(),f=function(){return s((function t(e,a,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;l(this,t),this.group=e,this.state=a,this.lenis=n,this.defaultDuration=o,this.activeModal=null,this.removeTabTrap=null,this.setupEventDelegation()}),[{key:"setupEventDelegation",value:function(){var t=this;this.state.triggers.forEach((function(e){e.addEventListener("click",(function(){var a=e.getAttribute("aa-modal-target"),n=t.state.getModalByName(a);t.activeModal&&t.closeModal(),n&&t.openModal(a)}))})),document.querySelectorAll("[aa-modal-close]").forEach((function(e){e.addEventListener("click",(function(){t.activeModal&&t.closeModal()}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&t.activeModal&&t.closeModal()}))}},{key:"lockScroll",value:function(){this.lenis?this.lenis.stop():document.body.style.overflow="hidden"}},{key:"unlockScroll",value:function(){this.lenis?this.lenis.start():document.body.style.overflow=""}},{key:"openModal",value:function(t){var e=this.state.getModalByName(t);if(e){var a=e.modal;this.group.style.visibility="visible",this.group.setAttribute("aa-modal-group-status","active"),a.style.visibility="visible",a.style.display="flex",a.setAttribute("aa-modal-status","active"),this.lockScroll(),this.activeModal=a;var n=v(a,"play",this.defaultDuration,this.state.getBackdrop());window.gsap.delayedCall(n,(function(){var t=a.querySelector('input, select, textarea, [tabindex]:not([tabindex="-1"])');t&&t.focus()})),this.removeTabTrap=function(t){function e(e){var a=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(a.length){var n=a[0],o=a[a.length-1];"Tab"===e.key&&(e.shiftKey&&document.activeElement===n?(e.preventDefault(),o.focus()):e.shiftKey||document.activeElement!==o||(e.preventDefault(),n.focus()))}}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}(a)}}},{key:"closeModal",value:function(){var t=this;if(this.activeModal){var e=this.activeModal,a=e.getAttribute("aa-modal-name");if(this.state.getModalByName(a)){var n=v(e,"reverse",this.defaultDuration,this.state.getBackdrop());window.gsap.delayedCall(n,(function(){e.style.visibility="hidden",e.style.display="none",e.setAttribute("aa-modal-status","not-active"),t.group.style.visibility="hidden",t.group.setAttribute("aa-modal-group-status","not-active"),t.unlockScroll(),t.removeTabTrap&&t.removeTabTrap(),t.activeModal=null}))}}}}])}();function v(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[].concat(r(t.hasAttribute("aa-animate")?[t]:[]),r(t.querySelectorAll("[aa-animate]")));(0,n.I)(i,e);var l=((parseFloat(t.getAttribute("aa-duration"))||a)+(parseFloat(t.getAttribute("aa-delay"))||0))/("reverse"===e?2:1);return o&&window.gsap&&("play"===e?window.gsap.fromTo(o,{autoAlpha:0},{autoAlpha:1,duration:.4,ease:"none"}):window.gsap.to(o,{autoAlpha:0,duration:.4,delay:l-.4,ease:"none"})),l}function y(t,e,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return{modal:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.style.display="flex",e.style.visibility="hidden",e.setAttribute("aa-modal-group-status","not-active");var n=new d(e,a),o=new f(e,n,t,a);return n.getAllModals().forEach((function(t){t.style.visibility="hidden",t.style.display="none",t.setAttribute("aa-modal-status","not-active")})),{open:function(t){return o.openModal(t)},close:function(){return o.closeModal()}}}(e,a,n,t,o)}}}}}]);